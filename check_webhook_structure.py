#!/usr/bin/env python3
"""
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã webhook —Å–æ–±—ã—Ç–∏—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ recipient_id.
"""

print("\n" + "="*80)
print("üìã –°–¢–†–£–ö–¢–£–†–ê INSTAGRAM WEBHOOK –°–û–ë–´–¢–ò–Ø")
print("="*80)

print("""
–¢–∏–ø–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Instagram webhook —Å–æ–±—ã—Ç–∏—è:

{
  "object": "instagram",
  "entry": [
    {
      "id": "<page-id>",
      "time": 1234567890,
      "messaging": [
        {
          "sender": {
            "id": "<sender-id>"  ‚Üê –≠–¢–û recipient_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏!
          },
          "recipient": {
            "id": "<recipient-id>"  ‚Üê –≠—Ç–æ –Ω–∞—à Instagram Business Account ID
          },
          "timestamp": 1234567890,
          "message": {
            "mid": "<message-id>",
            "text": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
          }
        }
      ]
    }
  ]
}

–í–ê–ñ–ù–û:
- sender.id - —ç—Ç–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–∏—Å–∞–ª –∞–≥–µ–Ω—Ç—É
- sender.id –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ recipient_id –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞
- recipient.id - —ç—Ç–æ ID –Ω–∞—à–µ–≥–æ Instagram Business Account

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞:
1. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É "Sender ID (—ç—Ç–æ recipient_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏):"
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç ID, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ID —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤)

–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤ webhook –ø—Ä–∏—Ö–æ–¥–∏—Ç –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç ID
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ID –∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—è
- –ú–æ–∂–µ—Ç –±—ã—Ç—å ID –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç
""")

print("\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:")
print("   1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–≥–¥–µ –∑–∞–ø—É—â–µ–Ω uvicorn)")
print("   2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ webhook —Å–æ–±—ã—Ç–∏–µ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è")
print("   3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¢–û–ß–ù–´–ô sender.id –∏–∑ –ª–æ–≥–æ–≤")
print("   4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ '62670099264' –∏–ª–∏ –¥—Ä—É–≥–æ–π ID")
print("   5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å —ç—Ç–∏–º —Ç–æ—á–Ω—ã–º ID")
print("\n   6. –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ webhook –µ—Å—Ç—å –ø–æ–ª–µ 'user' –∏–ª–∏ 'from'")
print("      —Å –¥—Ä—É–≥–∏–º ID, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å")

