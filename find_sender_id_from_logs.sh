#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ sender.id –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞

echo "üîç –ü–æ–∏—Å–∫ sender.id –≤ –ª–æ–≥–∞—Ö..."
echo ""

# –ò—â–µ–º –ø—Ä–æ—Ü–µ—Å—Å uvicorn
UVICORN_PID=$(lsof -ti:8000 2>/dev/null)

if [ -z "$UVICORN_PID" ]; then
    echo "‚ö†Ô∏è  –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000"
    echo "üí° –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞"
    exit 1
fi

echo "‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (PID: $UVICORN_PID)"
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:"
echo "   1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä (uvicorn)"
echo "   2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å '–ù–ê–ô–î–ï–ù RECIPIENT_ID' –∏–ª–∏ 'Sender ID'"
echo "   3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è —Ç–µ—Å—Ç–∞:"
echo "      python3 test_instagram_send.py <ID>"
echo ""
echo "üí° –ï—Å–ª–∏ –ª–æ–≥–∏ –Ω–µ –≤–∏–¥–Ω—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞:"
echo "   ps aux | grep $UVICORN_PID"

